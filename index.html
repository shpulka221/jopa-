<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Jump Up</title>
<style>
html,body{margin:0;padding:0;background:black;overflow:hidden;font-family:Arial;}
#gameWrapper{position:relative;width:360px;height:640px;margin:auto;background:black;overflow:hidden;}
canvas{display:block;}
#menu,#gameover{position:absolute;width:100%;text-align:center;top:15%;color:white;z-index:2;}
button{padding:10px 20px;margin-top:10px;font-size:16px;}
.color-option{width:35px;height:35px;border-radius:50%;display:inline-block;margin:5px;border:2px solid white;}
</style>
</head>
<body>

<div id="gameWrapper">

<div id="menu">
<h1>JUMP UP</h1>
<h3>–í—ã–±–µ—Ä–∏ —Ü–≤–µ—Ç</h3>
<div>
<div class="color-option" style="background:black" onclick="selectColor('black')"></div>
<div class="color-option" style="background:white" onclick="selectColor('white')"></div>
<div class="color-option" style="background:pink" onclick="selectColor('pink')"></div>
<div class="color-option" style="background:green" onclick="selectColor('green')"></div>
<div class="color-option" style="background:red" onclick="selectColor('red')"></div>
<div class="color-option" style="background:orange" onclick="selectColor('orange')"></div>
<div class="color-option" style="background:blue" onclick="selectColor('blue')"></div>
<div class="color-option" style="background:cyan" onclick="selectColor('cyan')"></div>
</div>
<button onclick="saveColor()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–≤–µ—Ç</button>
<br>
<button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
</div>

<div id="gameover" style="display:none;">
<h1>–ù–£ –¢–´ –ò –õ–û–•</h1>
<button onclick="restartGame()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
<br>
<button onclick="showMenu()">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
</div>

<canvas id="gameCanvas"></canvas>
</div>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
canvas.width=360;
canvas.height=640;

let playerColor=localStorage.getItem("ballColor")||"white";
let selectedColor=playerColor;

let player;
let platforms=[];
let particles=[];
let gameStarted=false;
let gameOver=false;
let gameActivated=false;
let showFire=false;
let fireTimer=0;

function selectColor(c){selectedColor=c;}
function saveColor(){playerColor=selectedColor;launchFire();}

function launchFire(){
particles=[];
for(let i=0;i<200;i++){
particles.push({
x:180,
y:220,
dx:(Math.random()-0.5)*8,
dy:(Math.random()-0.5)*8,
life:60,
color:`hsl(${Math.random()*360},100%,60%)`
});
}
showFire=true;
fireTimer=60; // –ø—Ä–∏–º–µ—Ä–Ω–æ 1 —Å–µ–∫—É–Ω–¥–∞ (60 –∫–∞–¥—Ä–æ–≤)
}

function initGame(){
player={x:180,y:580,radius:26,dy:-18,gravity:0.6,jumpPower:-18};
platforms=[];
gameOver=false;
gameActivated=false;
for(let i=0;i<7;i++){createPlatform(Math.random()*260,560-i*80);}
}

function createPlatform(x,y){
let type=Math.random()<0.2?"spike":"normal";
platforms.push({x,y,width:100,height:15,type});
}

function drawBackground(){
let g=ctx.createLinearGradient(0,0,0,640);
g.addColorStop(0,"rgba(255,0,150,0.25)");
g.addColorStop(1,"rgba(0,200,255,0.25)");
ctx.fillStyle=g;
ctx.fillRect(0,0,360,640);
}

function drawPlayer(){ctx.beginPath();ctx.arc(player.x,player.y,player.radius,0,Math.PI*2);ctx.fillStyle=playerColor;ctx.fill();}
function drawPlatforms(){platforms.forEach(p=>{if(p.type==="normal"){ctx.fillStyle="white";ctx.fillRect(p.x,p.y,p.width,p.height);}else{ctx.fillStyle="red";for(let i=0;i<5;i++){ctx.beginPath();ctx.moveTo(p.x+i*20,p.y+15);ctx.lineTo(p.x+10+i*20,p.y);ctx.lineTo(p.x+20+i*20,p.y+15);ctx.fill();}}});}

function updateFire(){
if(showFire){
ctx.font="40px Arial";
ctx.fillStyle="black";
ctx.textAlign="center";
ctx.fillText("–ù–ò–®–¢–Ø–ö üòé",180,220);
fireTimer--;
if(fireTimer<=0) showFire=false;
}
particles.forEach(p=>{p.x+=p.dx;p.y+=p.dy;p.life--;ctx.fillStyle=p.color;ctx.fillRect(p.x,p.y,4,4);});
particles=particles.filter(p=>p.life>0);
}

function update(){
ctx.clearRect(0,0,360,640);
drawBackground();
if(gameStarted && !gameOver){
player.dy+=player.gravity;
player.y+=player.dy;

// –æ—Ç—Å–∫–∞–∫–∏–≤–∞–Ω–∏–µ –æ—Ç –¥–Ω–∞ –ø–æ–∫–∞ –∏–≥—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
if(!gameActivated && player.y+player.radius>640){
player.y=640-player.radius;
player.dy=player.jumpPower;
}

// —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
platforms.forEach(p=>{
if(player.y+player.radius>p.y && player.y+player.radius<p.y+p.height &&
player.x>p.x && player.x<p.x+p.width && player.dy>0){
if(p.type==="spike"){endGame();}else{player.dy=player.jumpPower;gameActivated=true;}}});

// –∫–∞–º–µ—Ä–∞
if(player.y<300){platforms.forEach(p=>p.y+=Math.abs(player.dy));player.y=300;}

platforms=platforms.filter(p=>p.y<640);
while(platforms.length<7){createPlatform(Math.random()*260,-20);}

// –ø—Ä–æ–∏–≥—Ä—ã—à —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
if(gameActivated && player.y>640){endGame();}

drawPlatforms();
drawPlayer();
}

updateFire();
requestAnimationFrame(update);
}

function endGame(){gameOver=true;document.getElementById("gameover").style.display="block";}
function startGame(){document.getElementById("menu").style.display="none";gameStarted=true;initGame();}
function restartGame(){document.getElementById("gameover").style.display="none";initGame();}
function showMenu(){document.getElementById("gameover").style.display="none";document.getElementById("menu").style.display="block";gameStarted=false;}

canvas.addEventListener("touchmove",e=>{
const rect=canvas.getBoundingClientRect();
player.x=e.touches[0].clientX-rect.left;
if(player.x<player.radius)player.x=player.radius;
if(player.x>360-player.radius)player.x=360-player.radius;
});

initGame();
update();
</script>
</body>
</html>
